{{/*  {{ with (templates.Defer (dict "key" "global")) }}
  {{ with resources.Get "css/main.css" }}
    {{ $opts := dict "minify" (not hugo.IsDevelopment) }}
    {{ with . | css.TailwindCSS $opts }}
      {{ if hugo.IsDevelopment }}
        <link rel="stylesheet" href="{{ .RelPermalink }}" />
      {{ else }}
          <link
            rel="stylesheet"
            href="{{ .RelPermalink }}"
            crossorigin="anonymous" />
      {{ end }}
    {{ end }}
  {{ end }}
{{ end }}  */}}

{{/* main css */}}
{{ with resources.Get "css/compiled.css" }}
  {{ if hugo.IsDevelopment }}
    <link rel="stylesheet" href="{{ .RelPermalink }}" />
  {{ else }}
    {{ with . | minify }}
      <link
        rel="stylesheet"
        href="{{ .RelPermalink }}"
        crossorigin="anonymous" />
    {{ end }}
  {{ end }}
{{ end }}


{{/* chroma styles */}}
{{ with resources.Get "css/chroma.css" }}
  {{ if hugo.IsDevelopment }}
    <link rel="stylesheet" href="{{ .RelPermalink }}" />
  {{ else }}
    {{ with . | minify }}
      <link
        rel="stylesheet"
        href="{{ .RelPermalink }}"
        crossorigin="anonymous" />
    {{ end }}
  {{ end }}
{{ end }}


{{/* custom styles */}}
{{ range (resources.Match "css/custom/*.css") }}
  {{ if hugo.IsDevelopment }}
    <link rel="stylesheet" href="{{ .RelPermalink }}" />
  {{ else }}
    {{ with . | minify }}
      <link
        rel="stylesheet"
        href="{{ .RelPermalink }}"
        crossorigin="anonymous" />
    {{ end }}
  {{ end }}
{{ end }}

{{/* 图片画廊CSS - 条件加载 */}}
{{ if .Scratch.Get "justifiedEnabled" }}
  <link rel="stylesheet" href="/css/fjGallery.css">
{{ end }}

{{ if .Scratch.Get "lightboxEnabled" }}
  <link rel="stylesheet" href="/css/glightbox.min.css">
{{ end }}

{{- if .IsHome }}
{{- /* cal-heatmap */}}

<script src="https://d3js.org/d3.v7.min.js"></script>

<script src="https://unpkg.com/cal-heatmap@4.0.0-beta.9/dist/cal-heatmap.min.js"></script>

<link rel="stylesheet" href="https://unpkg.com/cal-heatmap@4.0.0-beta.9/dist/cal-heatmap.css"></script>

{{/* tooltip */}}

<script src="https://unpkg.com/@popperjs/core@2"></script>

<script src="https://unpkg.com/tippy.js@6"></script>

{{- end }}
